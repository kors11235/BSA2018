!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(3),e.exports=n(2)},function(e,t){const n=document.getElementById("botInfo"),r=document.getElementById("botInfoModal"),o=document.getElementById("closeBotHelp");n.addEventListener("click",e=>{r.style.display="block"}),o.addEventListener("click",e=>{e.target.parentElement.style.display="none"})},function(e,t){},function(e,t,n){"use strict";n.r(t);let r=sessionStorage.getItem("nickname")||!1,o=!1;const a=io.connect();let s=sessionStorage.getItem("nickname")||!1;const l=document.getElementById("myModal");function i(e,t){0==e.target.value.length?e.target.style.borderColor="#eee":t(e.target)?e.target.style.borderColor="red":e.target.style.borderColor="green"}function c(e){return!/^[A-Za-z\s]+$/.test(e.value)&&(0==e.value.length?(e.placeholder="Enter your name!",e.style.borderColor="red",!0):(e.placeholder="You can use only A-Z letters!",e.style.borderColor="red",!0))}function u(e,t){let n=!1;return 1==t||(a.emit("exist nickname",e.value),a.on("exist nickname",e=>{1==e&&(nicknameInput.style.borderColor="red",nicknameInput.placeholder="This nick is already existed")}),0==e.value.length&&(e.placeholder="Enter your nickname!",e.style.borderColor="red",n=!0),n)}function d(){return"red"==nicknameInput.style.borderColor||0==nicknameInput.value.length?(0==nicknameInput.value.length&&(nicknameInput.placeholder="Enter your nickname!",nicknameInput.style.borderColor="red"),nicknameInput.value="",!!c(nameInput)&&(console.log(2),nameInput.value="",!1)):!c(nameInput)||(nameInput.value="",("red"==nicknameInput.style.borderColor||0==nicknameInput.value.length)&&(nicknameInput.value="",!1))}const m=document.getElementById("login_btn");window.addEventListener("load",()=>(function(){if(s){document.body.removeChild(l),userHeader.innerText="@"+s;let e={name:sessionStorage.getItem("name"),nickname:sessionStorage.getItem("nickname"),status:""};a.emit("new user",e,e=>{})}})()),nicknameInput.addEventListener("input",e=>i(e,u)),nameInput.addEventListener("input",e=>i(e,c)),m.addEventListener("click",()=>(function(e){if(!e())return;console.log(s),s=nicknameInput.value,userHeader.innerText="@"+s,sessionStorage.setItem("nickname",s),sessionStorage.setItem("name",nameInput.value);let t={name:nameInput.value,nickname:nicknameInput.value,status:""};a.emit("new user",t,e=>{e&&document.body.removeChild(l)})})(d));const g=document.getElementById("text");function p(){let e=g.value,t={nickname:r,content:e,date:new Date};if(a.emit("message",t),e.startsWith("@bot")){let t=e.replace("@bot","").trim();a.emit("Bot Benjamin",t)}scroll=!1,g.value=""}const f=document.getElementById("text"),y=document.getElementById("messages-container");textSubmit.addEventListener("click",()=>{p()}),f.addEventListener("keyup",e=>(function(e){e.preventDefault(),"Enter"==e.key&&p()})(e)),f.addEventListener("input",e=>{a.emit("writing message",r,!0)}),f.addEventListener("change",e=>{a.emit("writing message",r,!1)}),y.addEventListener("scroll",e=>(function(e){e.stopPropagation(),Math.round(e.target.scrollTop)!=e.target.scrollHeight-e.target.clientHeight?scroll=!0:scroll=!1})(e));n(1);function v(e,t){var n=document.createElement("div"),r=document.createElement("div");if(n.className="message-box",n.className+=" alert",0!=e.nickname.length){n.innerHTML="<h6>"+e.nickname+"</h6>";let t=new Date(e.date);n.innerHTML+='<span class="small font-italic">'+t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+"</span>",e.nickname==sessionStorage.getItem("nickname")?(n.className+=" toright",n.className+=" alert-secondary"):n.className+=" alert-warning"}else n.className+=" border border-secondary text-center \tloggedout-msg";if(void 0!=e.content&&e.content.includes("@")){let t,r=e.content.split(" ");for(let e=0;e<r.length;e++)r[e].includes("@")&&(t=r[e].substring(1));sessionStorage.getItem("nickname")==t&&function(e,t){sessionStorage.getItem("nickname")==e.trim()&&t.setAttribute("style","background:#ffc107 !important;color:#333 !important")}(t,n)}r.innerText=e.content,r.className="msg",n.appendChild(r),t.appendChild(n)}const I=document.getElementById("messages-container");a.on("history",e=>{!function(e,t){if(t.innerHTML="",e.sort(function(e,t){return new Date(t.date)-new Date(e.date)}),e.length>=10)for(let n=99;n>=0;n--)e.hasOwnProperty(n)&&v(e[n],t);else for(let n=e.length-1;n>=0;n--)e.hasOwnProperty(n)&&v(e[n],t);0==o&&(t.scrollTop=t.scrollHeight)}(e,I)}),a.on("message",e=>{!function(e,t){v(e,t),0==o&&(t.scrollTop=t.scrollHeight)}(e,I)});document.getElementById("writing-msg");const k=document.getElementById("users-container");a.on("writing message",(e,t,n)=>{!function(e,t,n){n.innerHTML=1==t?'<i class="fas fa-pen"></i> @'+e+" is typing...":""}(e,t,n)}),a.on("get users",e=>{!function(e,t){let n,r;t.innerHTML="";for(let o=0;o<e.length;o++)n=document.createElement("div"),r="online"==e[o].status?"text-success":"just appeared"==e[o].status?"text-light":"just left"==e[o].status?"text-light":"text-secondary",n.innerHTML="<h6>@"+e[o].nickname+"</h6><span class='"+r+"'>"+e[o].status+"</span>",n.innerHTML+="<div>Name: "+e[o].name+"</div>",n.className="user-box bg-dark",t.appendChild(n)}(e,k)})}]);